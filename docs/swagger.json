{
    "swagger": "2.0",
    "info": {
        "contact": {}
    },
    "paths": {
        "/api/v1/clusters": {
            "get": {
                "description": "获取所有集群的列表，支持分页和筛选",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "clusters"
                ],
                "summary": "获取集群列表",
                "parameters": [
                    {
                        "type": "integer",
                        "default": 1,
                        "description": "页码",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "default": 10,
                        "description": "每页数量",
                        "name": "page_size",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "集群类型",
                        "name": "cluster_type",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "区域",
                        "name": "region",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "获取成功",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "post": {
                "description": "创建一个新的 Kubernetes 集群",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "clusters"
                ],
                "summary": "创建新的集群",
                "parameters": [
                    {
                        "description": "集群信息",
                        "name": "cluster",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.Cluster"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "创建成功",
                        "schema": {
                            "$ref": "#/definitions/models.Cluster"
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/clusters/{id}": {
            "get": {
                "description": "根据ID获取集群的详细信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "clusters"
                ],
                "summary": "获取单个集群信息",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "集群ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "获取成功",
                        "schema": {
                            "$ref": "#/definitions/models.Cluster"
                        }
                    },
                    "404": {
                        "description": "集群不存在",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "put": {
                "description": "根据ID更新集群的详细信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "clusters"
                ],
                "summary": "更新集群信息",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "集群ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "更新的集群信息",
                        "name": "cluster",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.Cluster"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "更新成功",
                        "schema": {
                            "$ref": "#/definitions/models.Cluster"
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "集群不存在",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "delete": {
                "description": "根据ID删除指定的集群",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "clusters"
                ],
                "summary": "删除集群",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "集群ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "删除成功",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "集群不存在",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/clusters/{id}/nodes": {
            "get": {
                "description": "通过 kubeconfig 获取集群的 WorkNode 节点状态",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "clusters"
                ],
                "summary": "获取集群节点状态",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "集群ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "获取成功",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "404": {
                        "description": "集群不存在",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "gorm.DeletedAt": {
            "type": "object",
            "properties": {
                "time": {
                    "type": "string"
                },
                "valid": {
                    "description": "Valid is true if Time is not NULL",
                    "type": "boolean"
                }
            }
        },
        "models.Cluster": {
            "description": "Kubernetes 集群信息",
            "type": "object",
            "properties": {
                "cluster_api": {
                    "description": "集群 API 地址",
                    "type": "string",
                    "example": "https://api.example.com"
                },
                "cluster_network": {
                    "description": "集群网络配置",
                    "allOf": [
                        {
                            "$ref": "#/definitions/models.Network"
                        }
                    ]
                },
                "cluster_region": {
                    "description": "集群区域",
                    "type": "string",
                    "example": "cn-east-1"
                },
                "cluster_status": {
                    "description": "集群状态",
                    "type": "boolean",
                    "example": true
                },
                "cluster_subnet": {
                    "description": "集群子网",
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "[\"subnet-1\"",
                        " \"subnet-2\"]"
                    ]
                },
                "cluster_type": {
                    "description": "集群类型",
                    "type": "string",
                    "example": "kubernetes"
                },
                "cluster_version": {
                    "description": "集群版本",
                    "type": "string",
                    "example": "v1.20.0"
                },
                "cluster_zone": {
                    "description": "集群可用区",
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "[\"zone-a\"",
                        " \"zone-b\"]"
                    ]
                },
                "cn_name": {
                    "description": "集群中文名称",
                    "type": "string",
                    "example": "生产环境集群"
                },
                "createdAt": {
                    "type": "string"
                },
                "deletedAt": {
                    "$ref": "#/definitions/gorm.DeletedAt"
                },
                "id": {
                    "type": "integer"
                },
                "kube_config": {
                    "description": "Kubernetes 配置文件内容",
                    "type": "string",
                    "example": "apiVersion: v1\nkind: Config\nclusters:\n- cluster:\n    server: https://api.example.com"
                },
                "name": {
                    "description": "集群名称",
                    "type": "string",
                    "example": "prod-cluster"
                },
                "updatedAt": {
                    "type": "string"
                }
            }
        },
        "models.Network": {
            "description": "集群网络配置信息",
            "type": "object",
            "properties": {
                "pod_cidr": {
                    "description": "Pod 网段",
                    "type": "string",
                    "example": "10.244.0.0/16"
                },
                "svc_cidr": {
                    "description": "Service 网段",
                    "type": "string",
                    "example": "10.96.0.0/12"
                }
            }
        }
    }
}